# 前言
非常感谢huatuo热更团队带来的全新技术,真的让我从热更的泥潭里爬出来.之前我采用了某个热技术,但是支持不是非常全,使用也麻烦.在团队队友的推荐下,尝试了解huatuo.于是我大约花了2周时间,将项目接入huatuo,并做成全热更(所有的资源&代码都均可热更).

# 关于dll.bytes的安全性保护
根据个人浅薄的理解(以下分享,也未必全对,请大家以实战为准.),以及过往项目的经验,就在此班门弄斧的分享一下我对于dll.bytes的做的保护措施.  

我个人认为,按照目前的load dll的方式,是没办法完全防止代码不泄露的.于是需要转换角度,即黑客得到代码,也办法轻易的让代码跑起来,然后去搞换皮.那么我就想出了以下几点思路,供大家参考:  

    1, 对包体加固,防止调试追踪;
    2, 对dll.bytes进行混淆,即使你得到dll通过ILSpy等工具逆转回来C#代码,也不那么容易搞;
    3, 打到ab包里的dll.bytes,做aes加密.在load之前解密.这一步其实对高手来说,也只是个破译时间问题;
    4, 把一些非必要热更新的代码,移植到AOT那一层.即使你得到我的代码,也不让你简单的就跑起来;
    5, 对游戏设定数据进行加密;

那么,我做的例子,就是围绕着2/3点来实现的.


# 关于混淆
用的是这个Unity插件,配置个人觉得不算难.看一下文档,基本就能配置了  

    插件地址: https://assetstore.unity.com/publishers/17355?locale=zh-CN

    插件文档: https://www.beebyte.co.uk/

    插件的具体配置: 直接看它的 Obfuscator_README

    ILSpy工具推荐:
    1, https://www.jetbrains.com/zh-cn/decompiler/   (windows强烈推荐这个)
    2, vsCode ilspy插件

混淆出来的效果, 个人觉得还是挺强.
在说个题外话,之前也在技术群里看到过,说这个作者还有另外一套逆转的,你这样混淆等于白做.但我个人搜了Google,没发现.如果有熟悉这方面技术的朋友,欢迎来huatuo群交流.


# 关于AES加密
对于高手来说,脱壳之后,跟踪到加密的哪个函数,他依然能够获取到密key,然后重新逆转回来.对于我个人来说,能阻挡一些小白,也是好的.难度有多高,我就加多高.关键是做这个一个步骤的成本非常低,很容易就实现了.


# 后话
在接入huatuo过程中,也遇到许许多多的问题,在此非常感谢walon & 冬瓜两位大佬的帮助,让我顺利的接入,并在安卓真机已经跑的飞起.最后,欢迎在huatuo群来技术交流.


    
  



